<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta content="text/html;charset=UTF-8" http-equiv="Content-Type"/>
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <title>PolitiGif</title>

  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script src="https://use.fontawesome.com/38cd4f8783.js"></script>

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

  <!-- jsgif: -->
  <script type="text/javascript" src="node_modules/jsgif/dist/bundle/GifEncoder.js"></script>

  <!-- submodules -->
  <script src="src/videoToCanvas.js"></script>
  <script src="src/overlayText.js"></script>
  <script src="src/createGif.js"></script>
  <script src="src/getMetadataFromIdentifier.js"></script>
  <script src="src/identifiersFromApiSearch.js"></script>

  <script src="dist/politigif.js"></script>
  <link href="dist/politigif.css" rel="stylesheet">

</head>
<body>

  <h1><span style="color:#35a;">Politi</span><span style="color:#c44;">Gif</span></h1>

  <div style="border: solid 1px #ccc; padding: 10px; text-align: center;">
    <!-- <video id="video" controls="true" crossorigin="use-credentials"> for CORS video -->
    <video id="video" controls="true">
      <!-- alternative video formats: <source src="video.ogv"> --><!-- FireFox 3.5 -->
      <!--
        <source src="https://ia800500.us.archive.org/31/items/CSPAN_20090617_150000/CSPAN_20090617_150000.mp4?start=0&end=60&ignore=x.mp4"><!-- WebKit -->
        https://archive.org/download/CSPAN_20170125_154100_Nancy_Pelosi_Calls_Voter_Fraud_Investigation_Really_Strange/format=h.264
      -->
      <source src="https://ia800500.us.archive.org/31/items/CSPAN_20170125_154100_Nancy_Pelosi_Calls_Voter_Fraud_Investigation_Really_Strange/CSPAN_20170125_154100_Nancy_Pelosi_Calls_Voter_Fraud_Investigation_Really_Strange.mp4?start=0&end=60&ignore=x.mp4"><!-- WebKit -->
      Your browser does not support HTML5 video tag. Please download FireFox 3.5 or higher.
    </video><br/>

    <button class="btn btn-lg btn-primary" id="capture">Capture</button>
    <button class="btn btn-lg btn-primary gif">Make Gif</button><br/>

    <div id="output" style="display: inline-block; top: 4px; position: relative ;border: dotted 1px #ccc; padding: 2px;"></div>

  </div>

  <script>
    (function() {

      var politiGif = new PolitiGif(); // initialize

      identifiersFromApiSearch('cspan', function(response) { console.log(response); });

      document.getElementById('capture').onclick = function onCapture() {

        politiGif.capture({
          // text: 'BOOM',
          // start: 0,
          // end: 4500 // milliseconds?
        });

      }

      $('.gif').click(function() {
        politiGif.capture();
        politiGif.capture();
        politiGif.capture();
        var url = createGif($('canvas').toArray());
        window.open(url);
      });

    })();
  </script>

</body>
</html>
